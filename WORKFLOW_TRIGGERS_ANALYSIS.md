# ğŸ”„ GitHub Actions å·¥ä½œæµè§¦å‘æ—¶æœºåˆ†æ

## ğŸ“‹ å½“å‰å·¥ä½œæµæ¦‚è§ˆ

é¡¹ç›®ç›®å‰æœ‰ **3ä¸ªä¸»è¦å·¥ä½œæµ**ï¼Œæ¯ä¸ªéƒ½æœ‰ä¸åŒçš„è§¦å‘æ¡ä»¶å’Œç”¨é€”ï¼š

### 1. ğŸš€ Unified CI/CD Pipeline (`unified-ci-cd.yml`)

#### è§¦å‘æ¡ä»¶
```yaml
on:
  push:
    branches: [ main, develop ]          # æ¨é€åˆ°ä¸»åˆ†æ”¯å’Œå¼€å‘åˆ†æ”¯
  pull_request:
    branches: [ main, develop ]         # é’ˆå¯¹ä¸»åˆ†æ”¯å’Œå¼€å‘åˆ†æ”¯çš„PR
  workflow_dispatch:                   # æ‰‹åŠ¨è§¦å‘
    inputs:
      environment: [staging, production]
      skip_tests: boolean
```

#### è§¦å‘æ—¶æœº
- âœ… **ä»£ç æ¨é€**ï¼šæ¨é€åˆ° `main` æˆ– `develop` åˆ†æ”¯æ—¶
- âœ… **Pull Request**ï¼šåˆ›å»ºæˆ–æ›´æ–°é’ˆå¯¹ `main` æˆ– `develop` åˆ†æ”¯çš„PRæ—¶
- âœ… **æ‰‹åŠ¨è§¦å‘**ï¼šé€šè¿‡GitHubç•Œé¢æ‰‹åŠ¨è¿è¡Œï¼Œå¯é€‰æ‹©ç¯å¢ƒ

#### æ‰§è¡Œå†…å®¹
- ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆCheckstyle, SpotBugs, PMDï¼‰
- å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- æ„å»ºåº”ç”¨
- éƒ¨ç½²åˆ°æŒ‡å®šç¯å¢ƒ

---

### 2. ğŸ¤– Dependabot Auto-merge (`dependabot.yml`)

#### è§¦å‘æ¡ä»¶
```yaml
on:
  pull_request:
    types: [opened, synchronize, labeled, ready_for_review]
  pull_request_target:
    types: [opened, synchronize, labeled, ready_for_review]
```

#### è§¦å‘æ—¶æœº
- âœ… **Dependabot PRåˆ›å»º**ï¼šå½“Dependabotåˆ›å»ºæ–°çš„ä¾èµ–æ›´æ–°PRæ—¶
- âœ… **PRåŒæ­¥**ï¼šå½“Dependabotæ›´æ–°PRæ—¶
- âœ… **æ ‡ç­¾æ·»åŠ **ï¼šå½“PRè¢«æ·»åŠ æ ‡ç­¾æ—¶
- âœ… **å‡†å¤‡å®¡æŸ¥**ï¼šå½“PRçŠ¶æ€å˜ä¸ºready_for_reviewæ—¶

#### æ‰§è¡Œå†…å®¹
- æ£€æŸ¥ä¾èµ–æ›´æ–°å®‰å…¨æ€§
- è‡ªåŠ¨åˆå¹¶å®‰å…¨çš„patchç‰ˆæœ¬æ›´æ–°
- é€šçŸ¥éœ€è¦æ‰‹åŠ¨å®¡æŸ¥çš„æ›´æ–°

---

### 3. ğŸš€ Release Workflow (`release.yml`)

#### è§¦å‘æ¡ä»¶
```yaml
on:
  push:
    branches: [ develop ]              # ä»…æ¨é€åˆ°developåˆ†æ”¯
  workflow_dispatch:                    # æ‰‹åŠ¨è§¦å‘
    inputs:
      version: string
      release_notes: string
```

#### è§¦å‘æ—¶æœº
- âœ… **å¼€å‘åˆ†æ”¯æ¨é€**ï¼šæ¨é€åˆ° `develop` åˆ†æ”¯æ—¶
- âœ… **æ‰‹åŠ¨å‘å¸ƒ**ï¼šé€šè¿‡GitHubç•Œé¢æ‰‹åŠ¨è§¦å‘å‘å¸ƒ

#### æ‰§è¡Œå†…å®¹
- åˆ›å»ºGitæ ‡ç­¾
- ç”Ÿæˆå‘å¸ƒè¯´æ˜
- æ„å»ºå‘å¸ƒåŒ…
- åˆ›å»ºGitHub Release

---

## ğŸ“Š è§¦å‘æ—¶æœºå¯¹æ¯”è¡¨

| å·¥ä½œæµ | æ¨é€è§¦å‘ | PRè§¦å‘ | æ‰‹åŠ¨è§¦å‘ | ç‰¹æ®Šæ¡ä»¶ |
|--------|----------|--------|----------|----------|
| **Unified CI/CD** | âœ… main, develop | âœ… main, develop | âœ… ç¯å¢ƒé€‰æ‹© | æœ€å…¨é¢ |
| **Dependabot** | âŒ | âœ… ä»…Dependabot | âŒ | ä»…ä¾èµ–æ›´æ–° |
| **Release** | âœ… develop | âŒ | âœ… ç‰ˆæœ¬è¾“å…¥ | ä»…å‘å¸ƒæµç¨‹ |

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### å½“å‰è§¦å‘æ—¶æœºåˆ†æ

#### âœ… ä¼˜ç‚¹
1. **æ¸…æ™°åˆ†ç¦»**ï¼šæ¯ä¸ªå·¥ä½œæµæœ‰æ˜ç¡®çš„èŒè´£
2. **é¿å…å†²çª**ï¼šä¸åŒå·¥ä½œæµä¸ä¼šç›¸äº’å¹²æ‰°
3. **çµæ´»æ§åˆ¶**ï¼šæ”¯æŒæ‰‹åŠ¨è§¦å‘å’Œå‚æ•°é…ç½®

#### âš ï¸ æ½œåœ¨é—®é¢˜
1. **é‡å¤è§¦å‘**ï¼šæ¨é€åˆ°developåˆ†æ”¯ä¼šåŒæ—¶è§¦å‘CI/CDå’ŒRelease
2. **èµ„æºæµªè´¹**ï¼šå¯èƒ½åŒæ—¶è¿è¡Œå¤šä¸ªå·¥ä½œæµ
3. **ä¾èµ–å…³ç³»**ï¼šæ²¡æœ‰æ˜ç¡®çš„å·¥ä½œæµä¾èµ–å…³ç³»

### ğŸ”§ ä¼˜åŒ–æ–¹æ¡ˆ

#### æ–¹æ¡ˆ1ï¼šæ¡ä»¶è§¦å‘ä¼˜åŒ–
```yaml
# Unified CI/CD - æ·»åŠ æ¡ä»¶
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  workflow_dispatch:
    # æ·»åŠ æ¡ä»¶ï¼Œé¿å…ä¸Releaseå†²çª
    if: ${{ !contains(github.event.head_commit.message, '[skip ci]') }}
```

#### æ–¹æ¡ˆ2ï¼šå·¥ä½œæµä¾èµ–
```yaml
# Release - ä¾èµ–CI/CDå®Œæˆ
on:
  workflow_run:
    workflows: ["Unified CI/CD Pipeline"]
    types: [completed]
    branches: [develop]
  workflow_dispatch:
    # æ‰‹åŠ¨è§¦å‘é€‰é¡¹
```

#### æ–¹æ¡ˆ3ï¼šåˆ†æ”¯ç­–ç•¥ä¼˜åŒ–
```yaml
# å»ºè®®çš„åˆ†æ”¯ç­–ç•¥
main:     # ç”Ÿäº§ç¯å¢ƒ
  - ä»…åˆå¹¶æ¥è‡ªdevelopçš„PR
  - è§¦å‘ç”Ÿäº§éƒ¨ç½²
  
develop:  # å¼€å‘ç¯å¢ƒ
  - æ—¥å¸¸å¼€å‘åˆ†æ”¯
  - è§¦å‘æµ‹è¯•å’Œæ„å»º
  
feature/*: # åŠŸèƒ½åˆ†æ”¯
  - ä¸è§¦å‘ä¸»è¦å·¥ä½œæµ
  - ä»…è§¦å‘è½»é‡çº§æ£€æŸ¥
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ¡ä»¶æ‰§è¡Œ
```yaml
# åªåœ¨ç‰¹å®šæ–‡ä»¶å˜æ›´æ—¶è§¦å‘
on:
  push:
    branches: [main, develop]
    paths:
      - 'src/**'
      - 'pom.xml'
      - '.github/workflows/**'
```

### 2. å¹¶å‘æ§åˆ¶
```yaml
# é™åˆ¶å¹¶å‘æ‰§è¡Œ
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
```

### 3. ç¼“å­˜ä¼˜åŒ–
```yaml
# æ·»åŠ ä¾èµ–ç¼“å­˜
- name: Cache Maven dependencies
  uses: actions/cache@v3
  with:
    path: ~/.m2
    key: ${{ runner.os }}-m2-${{ hashFiles('**/pom.xml') }}
```

## ğŸ¯ æœ€ç»ˆå»ºè®®

### å½“å‰çŠ¶æ€ï¼šè‰¯å¥½ âœ…
- å·¥ä½œæµèŒè´£æ¸…æ™°
- è§¦å‘æ¡ä»¶åˆç†
- æ”¯æŒæ‰‹åŠ¨æ§åˆ¶

### å¯ä¼˜åŒ–ç‚¹ï¼š
1. **æ·»åŠ æ¡ä»¶è§¦å‘**ï¼šé¿å…ä¸å¿…è¦çš„æ‰§è¡Œ
2. **ä¼˜åŒ–åˆ†æ”¯ç­–ç•¥**ï¼šæ˜ç¡®å„åˆ†æ”¯ç”¨é€”
3. **æ·»åŠ ç¼“å­˜æœºåˆ¶**ï¼šæå‡æ‰§è¡Œæ•ˆç‡
4. **è®¾ç½®å¹¶å‘æ§åˆ¶**ï¼šé¿å…èµ„æºå†²çª

### æ¨èé…ç½®ï¼š
```yaml
# ç†æƒ³çš„è§¦å‘é…ç½®
Unified CI/CD: æ‰€æœ‰å¼€å‘æ´»åŠ¨ + æ‰‹åŠ¨è§¦å‘
Dependabot:     ä»…ä¾èµ–æ›´æ–°PR
Release:        ä»…developåˆ†æ”¯ + æ‰‹åŠ¨å‘å¸ƒ
```

---
*åˆ†ææ—¶é—´ï¼š2025å¹´9æœˆ27æ—¥*
*å·¥ä½œæµæ•°é‡ï¼š3ä¸ª*
*ä¼˜åŒ–çŠ¶æ€ï¼šè‰¯å¥½ï¼Œå¯è¿›ä¸€æ­¥ä¼˜åŒ–*
